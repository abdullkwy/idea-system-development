# دليل المطورين لنظام آيديا

## مقدمة

يرحب بكم فريق آيديا في دليل المطورين الشامل لنظامنا المتكامل. يهدف هذا الدليل إلى توفير الموارد والمعلومات اللازمة للمطورين الجدد والحاليين لفهم بنية النظام، كيفية إعداده، تطويره، وصيانته. نظام آيديا هو حل شامل يجمع بين إدارة المحتوى (CMS)، لوحات تحكم للعملاء، ونظام لإدارة المهام، بالإضافة إلى موقع ويب تفاعلي. تم بناء النظام باستخدام إطار عمل Django في الخلفية، مع استخدام HTML، CSS، و JavaScript في الواجهات الأمامية.

## 1. نظرة عامة على بنية النظام

يتكون نظام آيديا من عدة مكونات رئيسية تعمل بتناغم لتقديم تجربة مستخدم متكاملة:

### 1.1. الواجهة الخلفية (Backend) - Django CMS

تعتبر Django CMS هي العمود الفقري للنظام، حيث توفر إدارة المحتوى، المصادقة، وإدارة البيانات. تم تطويرها باستخدام Python وإطار عمل Django، وتستخدم قاعدة بيانات PostgreSQL (موصى بها) أو SQLite (للتطوير).

**المكونات الرئيسية:**
- **`idea_cms_project/`**: المجلد الرئيسي لمشروع Django.
  - **`idea_cms/`**: إعدادات المشروع الرئيسية (settings.py, urls.py).
  - **`cms/`**: تطبيق Django الرئيسي الذي يحتوي على النماذج (models)، الواجهات البرمجية (API views)، و serializers.
    - **`models.py`**: تعريف نماذج قاعدة البيانات للمستخدمين، المشاريع، المهام، الإشعارات، وغيرها.
    - **`serializers.py`**: تحويل نماذج Django إلى تنسيقات JSON/XML والعكس للتعامل مع الـ APIs.
    - **`api_views.py`**: تعريف منطق الواجهات البرمجية (API endpoints) باستخدام Django REST Framework.
    - **`api_urls.py`**: تحديد مسارات URL للواجهات البرمجية.
    - **`api_docs.py`**: إعداد توثيق API التفاعلي باستخدام `drf-yasg` (Swagger/OpenAPI).
    - **`management/commands/`**: يحتوي على أوامر Django المخصصة (مثل `fix_system_issues.py`).
    - **`utils/`**: يحتوي على أدوات مساعدة للنظام (مثل `system_optimizer.py`).

### 1.2. الواجهات الأمامية (Frontend)

تتكون الواجهات الأمامية من ثلاثة أجزاء رئيسية، كل منها مصمم لغرض محدد:

- **الموقع الرئيسي (`website_project_v3/`)**: الواجهة العامة للجمهور، مصممة لتقديم معلومات عن آيديا وخدماتها. تستخدم HTML، CSS (مع تحسينات مثل Glass Morphism، تدرجات محسنة، وضع ليلي، واستجابة)، و JavaScript (مع Lottie animations، chatbot، وتحسينات الأداء).
- **لوحة تحكم العملاء (`client_portal/`)**: بوابة مخصصة للعملاء لمتابعة مشاريعهم، تقارير الأداء، والتواصل. تتضمن صفحات تسجيل الدخول ولوحة القيادة، وتستخدم HTML، CSS، و JavaScript.
- **نظام إدارة المهام للفريق (`team_management/`)**: لوحة تحكم داخلية لفريق آيديا لإدارة المهام والمشاريع. تتضمن صفحات تسجيل الدخول ولوحة القيادة، وتستخدم HTML، CSS، و JavaScript.
- **لوحة تحكم آيديا الإدارية (`admin_panel/`)**: لوحة تحكم إدارية شاملة لإدارة المحتوى، المستخدمين، والإعدادات العامة للنظام. تم تصميمها لتكون متكاملة مع Django CMS. تستخدم HTML، CSS، و JavaScript.

## 2. إعداد بيئة التطوير

لإعداد بيئة التطوير الخاصة بك، اتبع الخطوات التالية:

### 2.1. المتطلبات الأساسية

تأكد من تثبيت البرامج التالية على نظامك:
- Python 3.8+ (موصى به Python 3.11)
- pip (مدير حزم Python)
- Git (نظام التحكم في الإصدارات)
- Node.js و npm/yarn (إذا كنت تخطط لتطوير الواجهات الأمامية باستخدام أطر عمل JavaScript حديثة)

### 2.2. استنساخ المستودع

ابدأ باستنساخ المشروع من مستودع GitHub:

```bash
git clone https://github.com/abdullkwy/idea-system-development.git
cd idea-system-development
```

### 2.3. إعداد البيئة الافتراضية

من الممارسات الجيدة استخدام بيئة افتراضية لـ Python لتجنب تعارض الحزم:

```bash
python3 -m venv venv
source venv/bin/activate  # لنظامي Linux/macOS
# venv\Scripts\activate  # لنظام Windows
```

### 2.4. تثبيت متطلبات الواجهة الخلفية

انتقل إلى مجلد مشروع Django CMS وقم بتثبيت المتطلبات:

```bash
cd idea_cms_project
pip install -r requirements.txt
```

### 2.5. إعداد قاعدة البيانات

لإعداد قاعدة البيانات، قم بتشغيل أوامر Django التالية:

```bash
python manage.py makemigrations cms
python manage.py migrate
python manage.py createsuperuser
```

### 2.6. تشغيل خادم التطوير

يمكنك تشغيل خادم تطوير Django:

```bash
python manage.py runserver
```

سيصبح النظام متاحًا على `http://127.0.0.1:8000/`.

## 3. تطوير الواجهة الخلفية (Django CMS)

### 3.1. النماذج (Models)

يتم تعريف جميع هياكل البيانات في `cms/models.py`. عند إضافة أو تعديل نماذج، تذكر تشغيل `makemigrations` و `migrate`.

### 3.2. الواجهات البرمجية (APIs)

يتم تعريف الواجهات البرمجية في `cms/api_views.py` و `cms/serializers.py`. يمكنك الوصول إلى توثيق API التفاعلي عبر Swagger/OpenAPI على المسارات التالية بعد تشغيل الخادم:
- `http://127.0.0.1:8000/swagger/`
- `http://127.0.0.1:8000/redoc/`

### 3.3. المصادقة (Authentication)

يستخدم النظام `Token Authentication` لـ APIs. يمكن للمستخدمين الحصول على رمز مميز (token) بعد تسجيل الدخول. يتم تعريف إعدادات المصادقة في `idea_cms/settings.py`.

### 3.4. أوامر الإدارة المخصصة

يمكنك تشغيل الأوامر المخصصة مثل `fix_system_issues` من خلال:

```bash
python manage.py fix_system_issues
```

## 4. تطوير الواجهات الأمامية

تتطلب الواجهات الأمامية (الموقع، لوحة العملاء، إدارة المهام، لوحة الإدارة) تعديل ملفات HTML، CSS، و JavaScript الخاصة بها. يتم ربط هذه الواجهات بالواجهة الخلفية عبر الـ APIs.

### 4.1. ربط الواجهات بالـ APIs

يتم استخدام `admin_panel/assets/js/api-client.js` و `admin_panel/assets/js/auth-manager.js` لإدارة الاتصال بالـ APIs والمصادقة. يجب تعديل هذه الملفات لتتناسب مع الـ endpoints المحددة.

### 4.2. تحسينات UI/UX

تم تطبيق العديد من التحسينات البصرية وتجربة المستخدم. عند إضافة ميزات جديدة، تأكد من الحفاظ على التناسق البصري والاستجابة لجميع الأجهزة.

## 5. التوثيق التفاعلي للـ APIs (Swagger/OpenAPI)

تم دمج `drf-yasg` لتوفير توثيق تفاعلي لواجهات برمجة التطبيقات. هذا يسمح للمطورين بفهم الـ endpoints المتاحة، أنواع البيانات، وكيفية التفاعل معها بسهولة. يمكن الوصول إليه من خلال المسارات المذكورة أعلاه.

## 6. أفضل الممارسات للتطوير المستمر

لضمان تطوير مستدام وفعال، يرجى اتباع أفضل الممارسات التالية:

- **التحكم في الإصدارات (Git)**: استخدم فروعًا منفصلة للميزات الجديدة والإصلاحات، وقم بمراجعة الكود قبل الدمج في الفرع الرئيسي.
- **التعليقات البرمجية (Code Comments)**: اكتب تعليقات واضحة وموجزة لشرح أجزاء الكود المعقدة أو غير الواضحة.
- **الاختبارات (Testing)**: اكتب اختبارات الوحدة (unit tests) واختبارات التكامل (integration tests) لضمان جودة الكود.
- **التوثيق (Documentation)**: حافظ على تحديث هذا الدليل وتوثيق أي ميزات أو تغييرات جديدة.
- **الأمان (Security)**: اتبع أفضل ممارسات الأمان في Django وتأكد من حماية البيانات الحساسة.
- **الأداء (Performance)**: راقب أداء النظام وحاول تحسينه باستمرار.

## 7. حل المشاكل الشائعة

- **مشاكل البيئة الافتراضية**: تأكد من تفعيل البيئة الافتراضية قبل تثبيت المتطلبات أو تشغيل الخادم.
- **مشاكل قاعدة البيانات**: تأكد من تشغيل `makemigrations` و `migrate` بعد أي تغيير في النماذج.
- **مشاكل الـ APIs**: تحقق من توثيق Swagger/OpenAPI للتأكد من صحة الـ endpoints والبيانات المرسلة.
- **مشاكل الواجهة الأمامية**: استخدم أدوات المطور في المتصفح لتصحيح أخطاء JavaScript و CSS.

## 8. المساهمة

نرحب بمساهماتكم في تطوير نظام آيديا. يرجى اتباع إرشادات المساهمة (سيتم توفيرها لاحقًا) عند تقديم طلبات السحب (Pull Requests).

---

